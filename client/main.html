<head>
  <title>community2</title>
</head>

<body>
  <div class="ui container">
    {{> hello}}
  </div>
</body>

<template name="hello">
  <div class="ui red three item inverted menu">
    <a data-who="event" class={{isActive "event"}}>Event</a>
    <a data-who="people" class={{isActive "people"}}>People</a>
    <a data-who="projects" class={{isActive "projects"}}>Projects</a>
  </div>
  {{#if Template.subscriptionsReady}}
    <div class="ui three columns stackable grid statistics">
      {{#if isSelected "people"}}
        {{#each users}}
          <div class="column">
            <div class="ui card">
              <div class="image">
                <img src={{avatar_url}} />
                <div class="content">
                  <div class="ui segment large header">{{login}}</div>
                  <div class="extra content">
                    <div class="ui three mini statistics">
                      <div class="ui statistic">
                        <div class="value">
                          <i class="cloud upload icon"></i> {{commitsForUser}}
                        </div>
                        <div class="label">
                          Commits
                        </div>
                      </div>
                      <div class="statistic">
                        <div class="value">
                          <i class="users icon"></i> {{issuesForUser}}
                        </div>
                        <div class="label">
                          Issues
                        </div>
                      </div>
                      <div class="statistic">
                        <div class="value">
                          <i class="spy icon"></i> {{socialStats}}
                        </div>
                        <div class="label">
                          Social
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        {{/each}}
      {{/if}}
      {{#if isSelected "projects"}}
        <div class="column">
          <ul>
          {{#each repos}}
            <li>{{full_name}} <br> {{description}} <br> Commits: {{commitsForRepo}}</li>
          {{/each}}
          </ul>
          <ul>
            {{#each issues}}
              <li>{{number}} | {{state}} | {{title}}</li>
            {{/each}}
          </ul>
        </div>
      {{/if}}
      {{#if isSelected "event"}}
        {{#with totalCloc }}
        <div class="column ui">
          <div class="statistic">
            <div class="value">
              {{ sum.nFiles }}
            </div>
            <div class="label">
              Files Created
            </div>
          </div>
        </div>

        <div class="column ui">
          <div class="statistic">
            <div class="value">
              {{ sum.code }}
            </div>
            <div class="label">
              Lines of Code written
            </div>
          </div>
        </div>

        <div class="column ui">
          <div class="statistic">
            <div class="value">
              {{ sum.comment }}
            </div>
            <div class="label">
              Code Comments Written
            </div>
          </div>
        </div>

        {{/with}}
      {{/if}}
    </div>
<!--    
    <ul>
      {{#each commits}}
        <li>{{sha}} | {{data}}</li>
      {{/each}}
    </ul>
    <ul>
      {{#each branches}}
        <li>{{branchId}}</li>
      {{/each}}
    </ul>-->
  {{else}}
    Loading data
  {{/if}}
</template>